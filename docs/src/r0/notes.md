# 设计笔记与讨论

> 这里存放着设计 2020 软院编译原理所使用的语言的时候所考虑的一些东西。

## 语法

> 邵老师：最好不要自创一门新的语言或者改编自小众语言。
> 
> Rynco：是否这么去做还没有确定。我个人是倾向于创建一门新的语言的
> 

考点：递归下降分析

> 按照 hambaka 的意思，c0 的语法可以进一步简化，降低实现难度。

Hambaka 建议的语法修改包括：

- 去除隐式类型转换，所有类型转换必须显式声明
- 只保留 while 和/或 for 作为唯一/二可用的循环
- 去除 switch 语句

Rynco 正在考虑的语法修改包括：

- 类型后置
- 规范 bool 类型

> Rynco: 我计划的是一个长得有点 Rust（只借鉴了关键字）的 C，不知道其他人怎么看
 
```rust
let global_var: double = -123456.789e10;

fn add(a: int, b: int) -> int {
    return a + b;
}

fn main() -> void {
    let a: int = 3;
    let b: int = 4;
    let c: int = add(a, b);
    if global_var > 0 {
        print("Hello");
    } else {
        print(c);
    }
}
```

> 自动类型推断应该不会有了……吧？有人要当进阶内容做我不反对。

## 类型系统

考点：类型转换

虚拟机的设计默认使用 64 位整数和浮点数。

会有整数和浮点数（没法用同一种类型假装能转换的）

虚拟机的设计支持数组、结构体和堆内存分配，这三者可以作为进阶内容选做。

## 
